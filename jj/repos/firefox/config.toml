# NOTE: This configuration was generated from Erich's scripting at
# <https://github.com/erichdongubler-mozilla/fx-scripts>. If you need to edit it,
# consider sharing upstream!

"$schema" = "https://jj-vcs.github.io/jj/latest/config-schema.json"

fsmonitor.backend = "watchman"
# fsmonitor.watchman.register-snapshot-trigger = true

[aliases]
"trains" = ["log", "--revisions=show_fork_point(trains() | @)"]

[fix.tools.mozlint]
# NOTE: This requires CWD to be the workspace root, for now; see also
# <https://github.com/jj-vcs/jj/issues/4866>.
command = [
  "uv",
  "run",
  "--no-project",
  "--script",
  "tools/lint/pipelint",
  "$path",
]
patterns = ["glob:'**/*'"]

[revset-aliases]
"trunk()" = "main@upstream"

"immutable_heads()" = '''
builtin_immutable_heads()
| remote_bookmarks(exact:'autoland')
| trains()
'''

"trains()" = '''
trunk()
| remote_bookmarks(exact:'beta')
| remote_bookmarks(regex:'^esr\d+$')
| remote_bookmarks(exact:'release')
'''

[git]
fetch = ["origin", "upstream"]
