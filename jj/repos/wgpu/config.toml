#:schema https://jj-vcs.github.io/jj/latest/config-schema.json

# NOTE: This configuration was generated from Erich's scripting at
# <https://github.com/erichdongubler-mozilla/fx-scripts>. If you need to edit it,
# consider sharing upstream!

[revset-aliases]
"trunk()" = "trunk@upstream"
"immutable_heads()" = """
builtin_immutable_heads()
| remote_bookmarks(regex:'^v\\d+$', exact:'upstream')
| remote_bookmarks(glob:'v0.*', exact:'upstream')
| staging@upstream
"""

[git]
fetch = ["origin", "upstream"]
push = "origin"

[fix.tools.taplo]
command = ["taplo", "format", "--stdin-filepath=$path", "-"]
patterns = ["glob:'**/*.toml'"]

[fix.tools.rustfmt]
command = ["rustfmt", "--emit=stdout", "--edition=2021"]
patterns = ["glob:'**/*.rs'"]

[fix.tools.rustfmt-deno]
command = [
  "rustfmt",
  "--emit=stdout",
  "--edition=2021",
  "--config-path=deno_webgpu/rustfmt.toml",
]
patterns = ["glob:'deno_webgpu/**/*.rs'"]

[remotes.origin]
auto-track-bookmarks = "*"
